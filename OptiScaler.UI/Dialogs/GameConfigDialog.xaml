<ContentDialog
    x:Class="OptiScaler.UI.Dialogs.GameConfigDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Game Configuration"
    PrimaryButtonText="Install Mod"
    SecondaryButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonClick="PrimaryButton_Click"
    SecondaryButtonClick="SecondaryButton_Click"
    Style="{StaticResource DefaultContentDialogStyle}"
    MinWidth="700"
    MaxWidth="900">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Tab Navigation (Xbox Style) -->
        <Grid Grid.Row="0" 
              Background="{StaticResource CardDarkBrush}"
              Padding="24,16"
              BorderBrush="#33FFFFFF"
              BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="8">
                
                <!-- General Tab -->
                <RadioButton x:Name="GeneralTab"
                             Content="General"
                             GroupName="ConfigTabs"
                             IsChecked="True"
                             Click="TabChanged"
                             Style="{StaticResource XboxTabRadioButtonStyle}"/>
                
                <!-- Presets Tab -->
                <RadioButton x:Name="PresetsTab"
                             Content="Presets"
                             GroupName="ConfigTabs"
                             Click="TabChanged"
                             Style="{StaticResource XboxTabRadioButtonStyle}"/>
                
                <!-- Advanced Tab -->
                <RadioButton x:Name="AdvancedTab"
                             Content="Advanced"
                             GroupName="ConfigTabs"
                             Click="TabChanged"
                             Style="{StaticResource XboxTabRadioButtonStyle}"
                             Visibility="Collapsed"/>
            </StackPanel>
        </Grid>

        <!-- Content Area -->
        <ScrollViewer Grid.Row="1" MaxHeight="600">
            <StackPanel Spacing="20" Padding="24">
                
                <!-- GENERAL TAB CONTENT -->
                <StackPanel x:Name="GeneralContent" Spacing="20">
                    
                    <!-- GAME INFORMATION -->
                    <Border Background="{StaticResource CardDarkBrush}" 
                            CornerRadius="8" 
                            Padding="20"
                            BorderBrush="#33FFFFFF"
                            BorderThickness="1">
                        <StackPanel Spacing="16">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <FontIcon Glyph="&#xE8FD;" FontSize="20" Foreground="#60A5FA"/>
                                <TextBlock Text="Game Information" 
                                           FontSize="18" 
                                           FontWeight="Bold" 
                                           Foreground="White"/>
                            </StackPanel>
                            
                            <Grid ColumnSpacing="16" RowSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Platform -->
                                <TextBlock Grid.Row="0" Grid.Column="0" 
                                           Text="Platform:" 
                                           Foreground="#CCCCCC" 
                                           VerticalAlignment="Center"/>
                                <StackPanel Grid.Row="0" Grid.Column="1" 
                                            Orientation="Horizontal" 
                                            Spacing="8">
                                    <FontIcon x:Name="PlatformIcon" FontSize="16" Foreground="White"/>
                                    <TextBlock x:Name="PlatformText" 
                                               Foreground="White" 
                                               FontWeight="SemiBold"/>
                                </StackPanel>
                                
                                <!-- Executable -->
                                <TextBlock Grid.Row="1" Grid.Column="0" 
                                           Text="Executable:" 
                                           Foreground="#CCCCCC" 
                                           VerticalAlignment="Center"/>
                                <TextBlock x:Name="ExecutableText" 
                                           Grid.Row="1" Grid.Column="1"
                                           TextWrapping="Wrap" 
                                           Foreground="White"
                                           FontFamily="Consolas" 
                                           FontSize="12"/>
                                
                                <!-- Install Directory -->
                                <TextBlock Grid.Row="2" Grid.Column="0" 
                                           Text="Install Dir:" 
                                           Foreground="#CCCCCC" 
                                           VerticalAlignment="Center"/>
                                <Grid Grid.Row="2" Grid.Column="1" ColumnSpacing="8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox x:Name="InstallPathTextBox" 
                                             IsReadOnly="True"
                                             FontFamily="Consolas"
                                             FontSize="12"/>
                                    
                                    <Button Grid.Column="1" 
                                            Click="OpenFolder_Click"
                                            ToolTipService.ToolTip="Open game folder"
                                            Background="#33FFFFFF"
                                            Width="36"
                                            Height="36">
                                        <FontIcon Glyph="&#xE8DA;" FontSize="14" Foreground="White"/>
                                    </Button>
                                    
                                    <Button Grid.Column="2" 
                                            Click="ChangePath_Click"
                                            ToolTipService.ToolTip="Change install directory"
                                            Background="#33FFFFFF"
                                            Width="36"
                                            Height="36">
                                        <FontIcon Glyph="&#xE8AB;" FontSize="14" Foreground="White"/>
                                    </Button>
                                </Grid>
                                
                                <!-- Actions Row (Edit INI) -->
                                <TextBlock Grid.Row="3" Grid.Column="0" 
                                           Text="Actions:" 
                                           Foreground="#CCCCCC" 
                                           VerticalAlignment="Center"/>
                                <Button Grid.Row="3" Grid.Column="1"
                                        Click="EditIni_Click"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource XboxButtonStyle}"
                                        Height="36"
                                        MinWidth="120">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon Glyph="&#xE70F;" FontSize="14"/>
                                        <TextBlock Text="Edit INI"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Border>
                    
                    <!-- QUICK CONFIGURATION -->
                    <Border x:Name="QuickConfigPanel"
                            Background="{StaticResource CardDarkBrush}" 
                            CornerRadius="8" 
                            Padding="20"
                            BorderBrush="#33FFFFFF"
                            BorderThickness="1"
                            Visibility="Collapsed">
                        <StackPanel Spacing="16">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <FontIcon Glyph="&#xE713;" FontSize="20" Foreground="#A78BFA"/>
                                <TextBlock Text="Configuration" 
                                           FontSize="18" 
                                           FontWeight="Bold" 
                                           Foreground="White"/>
                            </StackPanel>
                            
                            <Grid ColumnSpacing="16" RowSpacing="16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Upscaler -->
                                <StackPanel Grid.Row="0" Grid.Column="0" Spacing="8">
                                    <TextBlock Text="Upscaler" 
                                               Foreground="#CCCCCC" 
                                               FontWeight="SemiBold"/>
                                    <ComboBox x:Name="UpscalerComboBox" 
                                              HorizontalAlignment="Stretch"
                                              SelectedIndex="0">
                                        <ComboBoxItem Content="Auto"/>
                                        <ComboBoxItem Content="DLSS"/>
                                        <ComboBoxItem Content="XeSS"/>
                                        <ComboBoxItem Content="FSR 2.2"/>
                                        <ComboBoxItem Content="FSR 3.1"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <!-- Quality Preset -->
                                <StackPanel Grid.Row="0" Grid.Column="1" Spacing="8">
                                    <TextBlock Text="Quality Preset" 
                                               Foreground="#CCCCCC" 
                                               FontWeight="SemiBold"/>
                                    <ComboBox x:Name="QualityComboBox" 
                                              HorizontalAlignment="Stretch"
                                              SelectedIndex="1">
                                        <ComboBoxItem Content="Ultra Quality"/>
                                        <ComboBoxItem Content="Quality"/>
                                        <ComboBoxItem Content="Balanced"/>
                                        <ComboBoxItem Content="Performance"/>
                                        <ComboBoxItem Content="Ultra Performance"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <!-- Frame Generation -->
                                <ToggleSwitch Grid.Row="1" Grid.Column="0"
                                              x:Name="FrameGenToggle" 
                                              Header="Frame Generation" 
                                              OnContent="Enabled" 
                                              OffContent="Disabled"
                                              Foreground="White"/>
                                
                                <!-- Overlay Menu -->
                                <ToggleSwitch Grid.Row="1" Grid.Column="1"
                                              x:Name="OverlayMenuToggle" 
                                              Header="Overlay Menu" 
                                              OnContent="Enabled" 
                                              OffContent="Disabled"
                                              Foreground="White"/>
                                
                                <!-- DLL Filename -->
                                <StackPanel Grid.Row="2" Grid.Column="0" Spacing="8">
                                    <TextBlock Text="DLL Filename" 
                                               Foreground="#CCCCCC" 
                                               FontWeight="SemiBold"/>
                                    <ComboBox x:Name="DllFilenameComboBox" 
                                              HorizontalAlignment="Stretch"
                                              SelectedIndex="0">
                                        <ComboBoxItem Content="dxgi.dll"/>
                                        <ComboBoxItem Content="d3d12.dll"/>
                                        <ComboBoxItem Content="winmm.dll"/>
                                        <ComboBoxItem Content="version.dll"/>
                                        <ComboBoxItem Content="dbghelp.dll"/>
                                        <ComboBoxItem Content="wininet.dll"/>
                                        <ComboBoxItem Content="winhttp.dll"/>
                                        <ComboBoxItem Content="OptiScaler.asi"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <!-- Sharpness -->
                                <StackPanel Grid.Row="2" Grid.Column="1" Spacing="8">
                                    <Grid>
                                        <TextBlock Text="Sharpness" 
                                                   Foreground="#CCCCCC" 
                                                   FontWeight="SemiBold"
                                                   HorizontalAlignment="Left"/>
                                        <TextBlock x:Name="SharpnessValueText" 
                                                   Text="0.30" 
                                                   Foreground="White"
                                                   HorizontalAlignment="Right"/>
                                    </Grid>
                                    <Slider x:Name="SharpnessSlider" 
                                            Minimum="0" 
                                            Maximum="1" 
                                            Value="0.30"
                                            StepFrequency="0.05"
                                            ValueChanged="SharpnessSlider_ValueChanged"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- PRESETS TAB CONTENT -->
                <StackPanel x:Name="PresetsContent" Spacing="20" Visibility="Collapsed">
                    
                    <!-- QUICK PRESETS -->
                    <Border Background="{StaticResource CardDarkBrush}" 
                            CornerRadius="8" 
                            Padding="20"
                            BorderBrush="#33FFFFFF"
                            BorderThickness="1">
                        <StackPanel Spacing="16">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <FontIcon Glyph="&#xE945;" FontSize="20" Foreground="#F59E0B"/>
                                <TextBlock Text="Quick Presets" 
                                           FontSize="18" 
                                           FontWeight="Bold" 
                                           Foreground="White"/>
                            </StackPanel>
                            
                            <TextBlock Text="Apply preset configurations instantly" 
                                       FontSize="13" 
                                       Foreground="#CCCCCC"
                                       Margin="0,0,0,8"/>
                            
                            <StackPanel Spacing="12">
                                
                                <!-- Auto Preset -->
                                <Button Click="PresetAuto_Click"
                                        Style="{StaticResource XboxButtonLeftStyle}"
                                        HorizontalAlignment="Stretch"
                                        Height="60">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <FontIcon Glyph="&#xE945;" FontSize="24" Foreground="#60A5FA"/>
                                        <StackPanel Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Auto" FontSize="16" FontWeight="Bold" Foreground="White"/>
                                            <TextBlock Text="Auto-detect GPU and apply optimal settings" FontSize="12" Foreground="#CCCCCC" TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                                
                                <!-- Performance Preset -->
                                <Button Click="PresetPerformance_Click"
                                        Style="{StaticResource XboxButtonLeftStyle}"
                                        HorizontalAlignment="Stretch"
                                        Height="60">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <FontIcon Glyph="&#xE945;" FontSize="24" Foreground="#10B981"/>
                                        <StackPanel Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Performance" FontSize="16" FontWeight="Bold" Foreground="White"/>
                                            <TextBlock Text="Maximize FPS with FSR 3.1 and frame generation" FontSize="12" Foreground="#CCCCCC" TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                                
                                <!-- Balanced Preset -->
                                <Button Click="PresetBalanced_Click"
                                        Style="{StaticResource XboxButtonLeftStyle}"
                                        HorizontalAlignment="Stretch"
                                        Height="60">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <FontIcon Glyph="&#xE945;" FontSize="24" Foreground="#F59E0B"/>
                                        <StackPanel Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Balanced" FontSize="16" FontWeight="Bold" Foreground="White"/>
                                            <TextBlock Text="Balance between quality and performance" FontSize="12" Foreground="#CCCCCC" TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                                
                                <!-- Quality Preset -->
                                <Button Click="PresetQuality_Click"
                                        Style="{StaticResource XboxButtonLeftStyle}"
                                        HorizontalAlignment="Stretch"
                                        Height="60">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <FontIcon Glyph="&#xE945;" FontSize="24" Foreground="#A78BFA"/>
                                        <StackPanel Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Quality" FontSize="16" FontWeight="Bold" Foreground="White"/>
                                            <TextBlock Text="Best image quality with DLSS" FontSize="12" Foreground="#CCCCCC" TextWrapping="NoWrap"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- ADVANCED TAB CONTENT -->
                <StackPanel x:Name="AdvancedContent" Spacing="20" Visibility="Collapsed">
                    
                    <!-- ADVANCED SETTINGS -->
                    <Border x:Name="AdvancedSettingsPanel"
                            Background="{StaticResource CardDarkBrush}" 
                            CornerRadius="8" 
                            Padding="20"
                            BorderBrush="#33FFFFFF"
                            BorderThickness="1">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <FontIcon Glyph="&#xE8B9;" FontSize="20" Foreground="#34D399"/>
                                <TextBlock Text="Advanced Settings" 
                                           FontSize="18" 
                                           FontWeight="Bold" 
                                           Foreground="White"/>
                            </StackPanel>
                            
                            <!-- Overlay Settings Expander -->
                            <Expander Header="Overlay Settings" 
                                      HorizontalAlignment="Stretch"
                                      IsExpanded="False">
                                <StackPanel Spacing="12" Padding="12,8">
                                    <ToggleSwitch x:Name="ShowFpsToggle" 
                                                  Header="FPS Counter" 
                                                  OnContent="Visible" 
                                                  OffContent="Hidden"/>
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Menu Scale" Foreground="#CCCCCC"/>
                                        <Slider x:Name="MenuScaleSlider" 
                                                Minimum="0.5" 
                                                Maximum="2.0" 
                                                Value="1.0"
                                                StepFrequency="0.1"/>
                                    </StackPanel>
                                </StackPanel>
                            </Expander>
                            
                            <!-- DLSS Settings Expander -->
                            <Expander Header="DLSS Settings" 
                                      HorizontalAlignment="Stretch"
                                      IsExpanded="False">
                                <StackPanel Spacing="12" Padding="12,8">
                                    <ToggleSwitch x:Name="DlssEnabledToggle" 
                                                  Header="DLSS Enabled" 
                                                  IsOn="True"/>
                                    <ToggleSwitch x:Name="DlssPresetOverrideToggle" 
                                                  Header="Render Preset Override"/>
                                </StackPanel>
                            </Expander>
                            
                            <!-- FSR Settings Expander -->
                            <Expander Header="FSR Settings" 
                                      HorizontalAlignment="Stretch"
                                      IsExpanded="False">
                                <StackPanel Spacing="12" Padding="12,8">
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Camera Near" Foreground="#CCCCCC"/>
                                        <TextBox x:Name="FsrNearTextBox" 
                                                 PlaceholderText="0.1" 
                                                 Width="120"
                                                 HorizontalAlignment="Left"/>
                                    </StackPanel>
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Camera Far" Foreground="#CCCCCC"/>
                                        <TextBox x:Name="FsrFarTextBox" 
                                                 PlaceholderText="10000" 
                                                 Width="120"
                                                 HorizontalAlignment="Left"/>
                                    </StackPanel>
                                    <ToggleSwitch x:Name="FsrDebugToggle" 
                                                  Header="Debug View"/>
                                </StackPanel>
                            </Expander>
                            
                            <!-- Logging Settings Expander -->
                            <Expander Header="Logging Settings" 
                                      HorizontalAlignment="Stretch"
                                      IsExpanded="False">
                                <StackPanel Spacing="12" Padding="12,8">
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Log Level" Foreground="#CCCCCC"/>
                                        <ComboBox x:Name="LogLevelComboBox" 
                                                  SelectedIndex="2"
                                                  Width="120"
                                                  HorizontalAlignment="Left">
                                            <ComboBoxItem Content="0 - Off"/>
                                            <ComboBoxItem Content="1 - Error"/>
                                            <ComboBoxItem Content="2 - Warning"/>
                                            <ComboBoxItem Content="3 - Info"/>
                                            <ComboBoxItem Content="4 - Debug"/>
                                            <ComboBoxItem Content="5 - Trace"/>
                                        </ComboBox>
                                    </StackPanel>
                                    <ToggleSwitch x:Name="LogToFileToggle" 
                                                  Header="Log To File"/>
                                    <ToggleSwitch x:Name="LogToConsoleToggle" 
                                                  Header="Log To Console"/>
                                </StackPanel>
                            </Expander>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- Status Message -->
                <Border x:Name="StatusMessageBorder"
                        Background="#1E3A8A" 
                        CornerRadius="6" 
                        Padding="12"
                        Visibility="Collapsed">
                    <TextBlock x:Name="StatusMessageText" 
                               Foreground="White"
                               TextWrapping="Wrap"/>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</ContentDialog>
